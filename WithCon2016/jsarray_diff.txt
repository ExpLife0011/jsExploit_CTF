*** jsarray.cpp.org	2017-02-22 08:51:03.090251347 -0800
--- jsarray.cpp	2016-09-27 09:39:06.000000000 -0700
*************** js::array_concat(JSContext *cx, unsigned
*** 2502,2521 ****
--- 2502,2522 ----
                  length += alength;
                  continue;
              }
          }
  
          if (!SetArrayElement(cx, nobj, length, v))
              return false;
          length++;
      }
  
+     nobj->setDenseInitializedLength(length);
      return SetLengthProperty(cx, nobj, length);
  }
  
  static JSBool
  array_slice(JSContext *cx, unsigned argc, Value *vp)
  {
      uint32_t length, begin, end, slot;
      JSBool hole;
  
      CallArgs args = CallArgsFromVp(argc, vp);
*************** array_slice(JSContext *cx, unsigned argc
*** 2580,2599 ****
--- 2581,2601 ----
      RootedValue value(cx);
      for (slot = begin; slot < end; slot++) {
          if (!JS_CHECK_OPERATION_LIMIT(cx) ||
              !GetElement(cx, obj, slot, &hole, &value)) {
              return false;
          }
          if (!hole && !SetArrayElement(cx, nobj, slot - begin, value))
              return false;
      }
  
+ 
      args.rval().setObject(*nobj);
      return true;
  }
  
  /* ES5 15.4.4.20. */
  static JSBool
  array_filter(JSContext *cx, unsigned argc, Value *vp)
  {
      CallArgs args = CallArgsFromVp(argc, vp);
  
